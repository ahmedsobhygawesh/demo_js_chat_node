<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Meeting Room</title>
    
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" />
    <link rel="stylesheet" href="style.css" />
    <script src="https://unpkg.com/peerjs@1.3.1/dist/peerjs.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/peerjs/1.3.1/peerjs.min.js.map"></script>
    <script src="/socket.io/socket.io.js"></script>
    <script>  const ROOM_ID = "<%= roomId %>";</script>

  </head>

  <body>
    <div class="main">


      <div class="main__left">

        <!-- display video -->

        <div class="main__videos">
          <div id="video-grid"></div>
        </div>

        
        <!-- action buttons  -->

        <div class="main__controls">

          <div class="main__controls_block">
            
            <div class="main__controls_button" id="muteButton" onclick="muteUnmute()">
              <i class="fa fa-microphone"></i>
              <span>Mute</span>
            </div>

            <div class="main__controls_button" id="playPauseVideo"  onclick="playStop()" >
              <i class="fa fa-video-camera"></i>
              <span>Pause Video</span>
            </div>

          </div>


          <div class="main__controls_block">

            <!-- <div class="main__controls_button">
              <i class="fa fa-shield"></i>
              <span>Security</span>
            </div> -->

            <div class="main__controls_button">
              <i class="fa fa-users"></i>
              <span>Joined People</span>
            </div>

            <div class="main__controls_button">
              <i class="fa fa-comment"></i>
              <span>Chat</span>
            </div>

          </div>


          <div class="main__controls_block">
            <div class="main__controls_button leaveMeeting" id="leave-meeting">
              <i class="fa fa-times"></i>
              <span class="">Leave Meeting</span>
            </div>
          </div>
        </div>

      </div>



      <!-- chat side -->

      <div class="main__right">
        <div class="main__header">
          <h6>Room Conversation</h6>
        </div>

        <div class="main__chat__window" id="main__chat__window">
          <ul class="messages" id="all_messages"></ul>
        </div>
        
        <div class="main__message_container">
          <input
            type="text"
            id="chat_message"
            placeholder="write your message..."
          />
        </div>
      </div>
    </div>


    <script src="script.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/annyang/2.6.0/annyang.min.js"></script>
    <script>

      if(annyang){
          console.log("We have annyang!");

          var commands = {

              //open mic
              'open mic': hello,
              'open mik': hello,
              'opn mik': hello,
              'open mike': hello,
              'open microphone': hello,

              //close mic
              'mute mic': hello,
              'mute mik': hello,
              'mute mek': hello,
              'mute mek': hello,
              'mute mek': hello,
              'mote mic': hello,
              'mute mike': hello,
              'mute microphone': hello,
              'mut microphone': hello,


              //open video
              'open camera': hello,
              'open cam': hello,
              'opn camera': hello,
              'open camera': hello,
              'open camra': hello,
              'open cmra': hello,

              //close video
              'close camera': hello,
              'close cam': hello,
              'close camera': hello,
              'close camera': hello,
              'close camra': hello,
              'close cmra': hello,




          }

          function hello(){
            alert('Hello! I am an alert box!!');

          }

          function myname(){
              console.log('My name is Billy!');
              playStop();
          }

          // Add Commands
          annyang.addCommands(commands);

          // Start listening
          annyang.start();

  console.log("Msss!");

      }

  </script>

    
  </body>
</html>